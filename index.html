<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- PWA / iOS -->
  <meta name="theme-color" content="#ffffff" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- Icons（iOS / PWA 安定構成） -->
  <link rel="apple-touch-icon" href="icon.png" />
  <link rel="icon" type="image/png" href="icon.png" />

  <title>WhiteMuse</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="dot"></div>
      <div>
        <div class="title">WhiteMuse</div>
        <div class="subtitle">プロ物撮り品質に寄せる “一括補正”</div>
      </div>
    </div>

    <div class="top-actions">
      <button id="btnInstallHelp" class="ghost">iPhoneに入れる</button>
      <button id="btnClearLearning" class="ghost danger">学習データ削除</button>
    </div>
  </header>

  <main class="wrap">

    <!-- ① 写真選択 -->
    <section class="card">
      <h2>① 写真を選ぶ（最大10枚）</h2>

      <div class="row">
        <label class="filebtn">
          <input id="fileInput" type="file" accept="image/*" multiple />
          <span>写真を選ぶ</span>
        </label>

        <div class="hint">
          iPhoneは「写真を撮る / 選ぶ」が表示されます。<br />
          10枚までまとめてOK。
        </div>
      </div>

      <div class="row">
        <div class="pill">カテゴリ</div>
        <select id="category" class="select">
          <option value="CHANEL">CHANEL</option>
          <option value="HERMES">HERMES</option>
          <option value="LOUISVUITTON">LOUIS VUITTON</option>
          <option value="DIOR">DIOR</option>
          <option value="GUCCI">GUCCI</option>
          <option value="PRADA">PRADA</option>
          <option value="CELINE">CELINE</option>
          <option value="OTHER">OTHER</option>
        </select>

        <div class="pill">書き出し</div>
        <select id="exportPreset" class="select">
          <option value="WEB">Web用（軽め高画質）</option>
          <option value="MERCARI">メルカリ用（高品質）</option>
        </select>

        <button id="btnGenerateIcons" class="ghost">仮アイコン生成</button>
      </div>

      <div id="modelStatus" class="banner warn" hidden>
        <b>背景除去モデルが見つかりません</b><br />
        「models/u2netp.onnx」を配置すると、端末内で背景除去が有効になります。
      </div>

      <details class="details">
        <summary>（任意）クラウド高精度モード</summary>

        <div class="row">
          <label class="switch">
            <input id="cloudToggle" type="checkbox" />
            <span>クラウド背景除去を使う（APIキー必要）</span>
          </label>
        </div>

        <div class="row">
          <input
            id="cloudApiKey"
            class="input"
            placeholder="APIキー（未入力なら使用しません）"
          />
        </div>

        <div class="hint">
          重い場合のみON推奨。初期状態は完全に端末内処理です。
        </div>
      </details>
    </section>

    <!-- ②〜⑥ 以下は構造そのまま -->
    <!-- （中身はあなたのコードと完全一致・省略） -->

  </main>

  <footer class="footer">
    <div class="mono">WhiteMuse / PWA / On-device processing</div>
  </footer>

  <!-- Script -->
  <script src="app.js"></script>
</body>
</html>
